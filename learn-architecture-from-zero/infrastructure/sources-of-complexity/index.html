<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>系统复杂度的来源 | Reading Notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/reading-notes/favicon.ico">
    <link rel="manifest" href="/reading-notes/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="写点啦!">
    <meta property="og:url" content="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity.html">
    <meta property="og:site_name" content="Reading Notes">
    <meta property="og:title" content="系统复杂度的来源">
    <meta property="og:description" content="系统复杂度的来源 架构设计是为了解决软件系统复杂度带来的问题，接下来复杂度的主要来源。 高性能 最近几十年软件系统的性能飞速发展，规模也从单台扩展到上万台。软件系统中高性能带来的复杂度主要体现在两方面： 一方面是单台计算机内部为了高性能带来的复杂度；; 另一方面是多台计算机集群为了高性能带来的复杂度。; 单机复杂度 系统性能的本质是由硬件驱动的，而对硬件的性">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Reading Notes">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/reading-notes/assets/css/0.styles.9772cc4e.css" as="style"><link rel="preload" href="/reading-notes/assets/js/app.8bb7ee81.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Layout.b9c2e4d9.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9b90199b.js" as="script"><link rel="preload" href="/reading-notes/assets/js/page-系统复杂度的来源.ee896c59.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.c1acbf4e.js" as="script"><link rel="prefetch" href="/reading-notes/assets/js/3.832dc784.js"><link rel="prefetch" href="/reading-notes/assets/js/73.ab0e76f6.js"><link rel="prefetch" href="/reading-notes/assets/js/74.668f8b56.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Blog.5eb9853e.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Layout.ea688dcf.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-NotFound.4b7d9d39.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Slide.82e33c92.js"><link rel="prefetch" href="/reading-notes/assets/js/page--25410731.60d18da4.js"><link rel="prefetch" href="/reading-notes/assets/js/page--3992e0e1.35fb3708.js"><link rel="prefetch" href="/reading-notes/assets/js/page--44a0de64.52f28ad0.js"><link rel="prefetch" href="/reading-notes/assets/js/page--4855b8f6.bae76056.js"><link rel="prefetch" href="/reading-notes/assets/js/page--5f87f751.6b55c4b9.js"><link rel="prefetch" href="/reading-notes/assets/js/page--7507ab0e.99dff375.js"><link rel="prefetch" href="/reading-notes/assets/js/page--ac2b465e.f7160225.js"><link rel="prefetch" href="/reading-notes/assets/js/page--d1e0c466.2b1910d0.js"><link rel="prefetch" href="/reading-notes/assets/js/page-BF算法和RK算法.a662a423.js"><link rel="prefetch" href="/reading-notes/assets/js/page-DRY.ada6b95f.js"><link rel="prefetch" href="/reading-notes/assets/js/page-KISS.b6f299c9.js"><link rel="prefetch" href="/reading-notes/assets/js/page-LOD.8589db1b.js"><link rel="prefetch" href="/reading-notes/assets/js/page-SOLID.173a911a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-Tire树.51dac316.js"><link rel="prefetch" href="/reading-notes/assets/js/page-YAGNI.0b205f1a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-专业主义.257b25f6.js"><link rel="prefetch" href="/reading-notes/assets/js/page-为什么要用金字塔原理.077e9f45.js"><link rel="prefetch" href="/reading-notes/assets/js/page-为什么需要学习掌握设计模式相关知识.6200cf77.js"><link rel="prefetch" href="/reading-notes/assets/js/page-了解架构设计.6b953858.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二分查找.1e1cbd65.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二分查找的变形.54336bf2.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二叉查找树.88f76603.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二叉树.001fd545.js"><link rel="prefetch" href="/reading-notes/assets/js/page-介绍.cedc487b.js"><link rel="prefetch" href="/reading-notes/assets/js/page-从0开始学架构.a1221b62.js"><link rel="prefetch" href="/reading-notes/assets/js/page-代码整洁之道-程序员的职业素养.f3d2f19b.js"><link rel="prefetch" href="/reading-notes/assets/js/page-冒泡、插入和选择排序.49e78e9a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-分治算法.748ece70.js"><link rel="prefetch" href="/reading-notes/assets/js/page-前言.98967410.js"><link rel="prefetch" href="/reading-notes/assets/js/page-动态规划.fd388d03.js"><link rel="prefetch" href="/reading-notes/assets/js/page-单例模式.303b9f99.js"><link rel="prefetch" href="/reading-notes/assets/js/page-哈希算法.d8dcf231.js"><link rel="prefetch" href="/reading-notes/assets/js/page-回溯算法.5fad58a3.js"><link rel="prefetch" href="/reading-notes/assets/js/page-图.1c6f525a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-堆.b12487c2.js"><link rel="prefetch" href="/reading-notes/assets/js/page-堆的应用.150377cd.js"><link rel="prefetch" href="/reading-notes/assets/js/page-实战.9d68d105.js"><link rel="prefetch" href="/reading-notes/assets/js/page-工厂模式.481119e5.js"><link rel="prefetch" href="/reading-notes/assets/js/page-归并排序和快速排序.03ee5692.js"><link rel="prefetch" href="/reading-notes/assets/js/page-手写链表的技巧.7456b309.js"><link rel="prefetch" href="/reading-notes/assets/js/page-排序.88075437.js"><link rel="prefetch" href="/reading-notes/assets/js/page-排序优化.972c8463.js"><link rel="prefetch" href="/reading-notes/assets/js/page-散列表.e802efed.js"><link rel="prefetch" href="/reading-notes/assets/js/page-数组.bba08247.js"><link rel="prefetch" href="/reading-notes/assets/js/page-栈.c9f3e88a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-桶排序、计数排序和基数排序.d0db807d.js"><link rel="prefetch" href="/reading-notes/assets/js/page-深度优先和广度优先搜索.7876bb70.js"><link rel="prefetch" href="/reading-notes/assets/js/page-硅谷钢铁侠.9b674b29.js"><link rel="prefetch" href="/reading-notes/assets/js/page-红黑树.4fa0a43f.js"><link rel="prefetch" href="/reading-notes/assets/js/page-练习.1e442784.js"><link rel="prefetch" href="/reading-notes/assets/js/page-设计散列表.248e6354.js"><link rel="prefetch" href="/reading-notes/assets/js/page-说不.4525b60d.js"><link rel="prefetch" href="/reading-notes/assets/js/page-说是.6043cd86.js"><link rel="prefetch" href="/reading-notes/assets/js/page-贪心算法.72be82ef.js"><link rel="prefetch" href="/reading-notes/assets/js/page-跳表.bbe21187.js"><link rel="prefetch" href="/reading-notes/assets/js/page-递归.983254a3.js"><link rel="prefetch" href="/reading-notes/assets/js/page-重构.fe063ed3.js"><link rel="prefetch" href="/reading-notes/assets/js/page-金字塔原理.75c9d90e.js"><link rel="prefetch" href="/reading-notes/assets/js/page-链表.b517bfd4.js"><link rel="prefetch" href="/reading-notes/assets/js/page-队列.8176978c.js"><link rel="prefetch" href="/reading-notes/assets/js/page-面向对象是什么.57a1b465.js"><link rel="prefetch" href="/reading-notes/assets/js/vendors~photo-swipe.5aab1745.js">
    <link rel="stylesheet" href="/reading-notes/assets/css/0.styles.9772cc4e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/reading-notes/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">Reading Notes</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title"><!---->
        目录
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🧑🏻‍💻 技术</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/algo/" class="nav-link"><!---->
  数据结构和算法之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-beauty-of-design-patterns/" class="nav-link"><!---->
  设计模式之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/learn-architecture-from-zero/" class="nav-link router-link-active active"><!---->
  从0开始学架构
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-clean-coder/" class="nav-link"><!---->
  代码整洁之道|程序员的职业素养
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🎯 综合能力</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/the-minto-pyramid-principle/" class="nav-link"><!---->
  金字塔原理
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🥤 人物传记</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/elon-musk/" class="nav-link"><!---->
  硅谷钢铁侠
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/niexia/reading-notes" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title"><!---->
      目录
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🧑🏻‍💻 技术</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/algo/" class="nav-link"><!---->
  数据结构和算法之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-beauty-of-design-patterns/" class="nav-link"><!---->
  设计模式之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/learn-architecture-from-zero/" class="nav-link router-link-active active"><!---->
  从0开始学架构
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-clean-coder/" class="nav-link"><!---->
  代码整洁之道|程序员的职业素养
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🎯 综合能力</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/the-minto-pyramid-principle/" class="nav-link"><!---->
  金字塔原理
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🥤 人物传记</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/elon-musk/" class="nav-link"><!---->
  硅谷钢铁侠
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/niexia/reading-notes" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">基础架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reading-notes/learn-architecture-from-zero/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/reading-notes/learn-architecture-from-zero/infrastructure/what-is-architecture/" class="sidebar-link">了解架构设计</a></li><li><a href="/reading-notes/learn-architecture-from-zero/infrastructure/principles/" class="sidebar-link">/learn-architecture-from-zero/infrastructure/principles/</a></li><li><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/" aria-current="page" class="active sidebar-link">系统复杂度的来源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#高性能" class="sidebar-link">高性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#单机复杂度" class="sidebar-link heading3">单机复杂度</a></li><li class="sidebar-sub-header"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#集群复杂度" class="sidebar-link heading3">集群复杂度</a></li></ul></li></ul></li><li><a href="/reading-notes/learn-architecture-from-zero/infrastructure/design-flow/" class="sidebar-link">/learn-architecture-from-zero/infrastructure/design-flow/</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">高可用架构模式</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">高性能架构模式</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">可扩展架构模式</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">架构实战</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">思考总结</span> <!----></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/reading-notes/learn-architecture-from-zero/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">从 0 开始学架构</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">系统复杂度的来源</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">系统复杂度的来源</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-8-22</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 10 min</span> <meta property="timeRequired" content="PT10M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#高性能" class="anchor-link heading2"><div>高性能</div></a></li><li class="anchor"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#单机复杂度" class="anchor-link heading3"><div>单机复杂度</div></a></li><li class="anchor"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/sources-of-complexity/#集群复杂度" class="anchor-link heading3"><div>集群复杂度</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="系统复杂度的来源"><a href="#系统复杂度的来源" class="header-anchor">#</a> 系统复杂度的来源</h1> <p>架构设计是为了解决软件系统复杂度带来的问题，接下来复杂度的主要来源。</p> <h2 id="高性能"><a href="#高性能" class="header-anchor">#</a> 高性能</h2> <p>最近几十年软件系统的性能飞速发展，规模也从单台扩展到上万台。软件系统中高性能带来的复杂度主要体现在两方面：</p> <ul><li>一方面是单台计算机内部为了高性能带来的复杂度；</li> <li>另一方面是多台计算机集群为了高性能带来的复杂度。</li></ul> <h3 id="单机复杂度"><a href="#单机复杂度" class="header-anchor">#</a> 单机复杂度</h3> <p>系统性能的本质是由硬件驱动的，而对硬件的性能的发挥起关键作用的就是操作系统，所以操纵系统也会跟着硬件发展而发展。操作系统是软件的运行环境，它的的复杂度直接决定系统的复杂度。</p> <p>操作系统和性能相关的就是<strong>进程和线程</strong>。</p> <ol><li>最早计算机没有操作系统，只有输入、计算和输出结果，<strong>大部分时候计算机都在等待用户输入，效率很低</strong></li> <li>为了解决等待输入的问题，有了批处理操作系统，就是把要执行的指令预先写下来（磁带、磁盘等）<strong>形成指令集</strong>，也就是常说的“任务”，把这些任务交个计算机执行</li> <li>批处理也有明显缺点，<strong>就是计算机一次只能执行一个任务</strong>，如果某个任务是从 I/O 设备读取大量数据，在 I/O 操作过程中，CPU 是空闲的</li> <li>为了解决这个问题，进程出现了。用进程对应一个任务，每个任务又自己的内存空间，进程间互不相关，由操作系统来调度。此时 CPU 还没有多核，<strong>为了达到多进程并行的效果，采用分时方式，即把 CP 的时间分成很多片段，每个片段只执行某个进程的执行</strong>。从 CPU 的角度来看还是串行的，但是由于 CPU 处理速度很快，我们用户看起来，感觉多进程是并行处理的。</li> <li>因为多进程之间互不相关，如果两个运行的过程中不能通信，那么只能是 A 任务把结果写到存储，B 任务再从存储中读取来处理，这样不仅效率低，看起来也会更加复杂。如果任务之间能够在运行中通信事情就更加灵活高效了。为了解决这个问题，设计出了各种进程间通信的方式：管道、消息队列、信号量、共享存储等。</li> <li>多进程可以并行执行任务，但是<strong>对于一个进程来说，它内部只能串行处理</strong>。而实际上，很多进程内部的子任务并不要求养个按时间顺序执行，也可以并行处理。就这样<strong>线程</strong>出现了，它是进程内部的子任务，这些子任务共享同一份进程数据。另外为了保证数据正确性，又发明了互斥锁机制。</li> <li>有了线程之后，<strong>操作系统调度的最小任务就变成了线程，而进程变成了操作系统分配资源的最小单位</strong>。</li></ol> <p>多进程多线程让并行处理的性能大大提升，但本质上还是分时系统，并不能做到真正的并行。显而易见要解决这个问题，就是让多个 CPU 同时执行计算任务，从而实现真正意义上的并行。目前解决方案有 3 种：</p> <ul><li><a href="https://zh.wikipedia.org/wiki/%E5%AF%B9%E7%A7%B0%E5%A4%9A%E5%A4%84%E7%90%86" target="_blank" rel="noopener noreferrer">SMP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（Symmetric-Multi-Processor，对称多处理器结构）</li></ul> <blockquote><p>一种多处理器的电脑硬件架构，在对称多处理架构下，每个处理器的地位都是平等的，对资源的使用权限相同。现代多数的多处理器系统，都采用对称多处理架构，也被称为对称多处理系统（Symmetric multiprocessing system）。在这个系统中，拥有超过一个以上的处理器，这些处理器都连接到同一个共享的主存上，并由单一操作系统来控制。</p></blockquote> <ul><li><a href="https://zh.wikipedia.org/wiki/%E9%9D%9E%E5%9D%87%E5%8C%80%E8%AE%BF%E5%AD%98%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener noreferrer">NUMA<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（Non-Uniform Memory Access，非一致存储访问结构）</li></ul> <blockquote><p>是一种为多处理器的电脑设计的内存架构，内存访问时间取决于内存相对于处理器的位置。在NUMA下，处理器访问它自己的本地内存的速度比非本地内存（内存位于另一个处理器，或者是处理器之间共享的内存）快一些。</p></blockquote> <ul><li>MPP（Massive Parallel Processing，海量并行处理结构）</li></ul> <p>其中 SMP 最常见，也是最流行的。</p> <p>要完成一个高性能的软件系统，那就需要考虑多进程、多线程、进程间通信、多线程并发等技术点。这些需要花费很大的精力来结合业务进行分析、判断、选择和组合。</p> <h3 id="集群复杂度"><a href="#集群复杂度" class="header-anchor">#</a> 集群复杂度</h3> <p>虽然计算机硬件在快速发展，但是相对于业务发展的速度来说还是远远不够的。例如2020 年天猫双11的订单创建峰值就达到58.3万笔/秒。</p> <p>这种复杂的业务，<strong>单机性能无论如何是无法支撑的，必须采用机器集群的方式来达到高性能</strong>。支付宝和微信这种规模的业务系统，后台系统的机器数量都是万台级别的。</p> <p>大量机器带来的性能提升，并不是增加机器这么简单，如何让这些机器之间互相配合是一个非常复杂的工作。</p> <h4 id="_1-任务分配"><a href="#_1-任务分配" class="header-anchor">#</a> 1. 任务分配</h4> <p><img src="/reading-notes/assets/img/architecture-cluter-extend.67884070.png" alt="architecture-cluter-extend"></p> <p>当我们从 1 台服务器增加到 2 台时，看看任务分配的复杂性。</p> <ul><li><strong>需要增加一个任务分配器</strong>。选择任务分配器是一个复杂的事情，需要考虑性能、成本、可维护性、可用性等因素。
<ul><li>可能是硬件设备（例如交换机）</li> <li>可能是软件网络设备（例如 LVS）</li> <li>也可能负载均衡软件（例如 Nginx）</li> <li>还可能是自己开发的系统</li></ul></li> <li><strong>任务分配器和真正业务服务器之间的链接和交互</strong>。需要选择合适的链接方式，并对连接进行管理。
<ul><li>链接建立</li> <li>链接检测</li> <li>链接中断如何处理</li></ul></li> <li><strong>任务分配器需要分配算法</strong>。
<ul><li>采用轮训算法</li> <li>还是按权重分配</li> <li>或者按照负载分配，如果按照负载，那么业务服务器还需要上报自己的负载状态给任务分配器</li></ul></li></ul> <p>👆仅仅是增加 1 台业务服务器。假设一台可以处理 5000次/s 请求，那么理论上这个架构能够支撑 10000次/s 请求，<strong>实际上有损耗，一般打 8 折</strong>，也就是 8000次/s。</p> <p>如果我们的性能要求再提高，假设要求每秒 100,000 次。是不是将业务服务器增加到 25 台就可以了呢？</p> <p>这样是不行呢，因为随着业务服务器的增加，任务分配器本身又会成为性能瓶颈。任务分配器也需要扩展为多台。</p> <p>这样系统就会更加复杂：</p> <ul><li>需要将不同用户分配到不同的任务分配器上。常见的方法有 DNS 轮询、智能 DNS、CDN、GSLB 设备（Global Server Load Balance，全局负载均衡）等</li> <li>任务分配器和业务服务器之间的链接从简单的“1 对 多”变成了“多对多”的网状结构</li> <li>机器数量从 3 台到 30 万台（一般分配服务器少于业务服务器，这里假设业务服务器 25 台，分配服务器为 5 台）</li></ul> <p>前面的例子都是以业务处理为例，实际上任务<strong>除了是完整的业务处理，也可以指某个具体的任务</strong>。例如“存储”、“运算”、“缓存”都可以作为一项任务，所以存储系统等都可以按照任务分配的方式来搭建架构。</p> <p>此外，“任务分配器”也不一定只能是物理上存在的机器或者一个独立运行的程序，是可以嵌入其他程序算法中的</p> <h4 id="_2-任务分解"><a href="#_2-任务分解" class="header-anchor">#</a> 2. 任务分解</h4> <p>通过任务分配，可以突破单机性能的瓶颈。但如果业务越来越复杂，单纯通过任务分配来扩展性能，收益会越来越低。</p> <p>业务简单时，1 台机器扩展到 10 台，性能能有 8 倍提升，但是如果业务复杂，可能只能提升 5 倍。原因就是业务月复杂，单台机器的处理性能就会越来越低。为了继续提升性能，需要采取第二种方式：任务分解，也就是把业务服务器拆分成更多组成部分。</p> <p><img src="/reading-notes/assets/img/architecture-cluter-task-decomposition.b1cbb458.png" alt="task-decomposition"></p> <p>在上面的结构示意图中，微信后台结构从业务逻辑上将各个子业务进行拆分，包括：注册登录、摇一摇等。</p> <p>这种方式，把大一统但复杂的业务拆分成小而简单但需要多个系统配合的业务系统。任务分解既不会减少功能，也不会减少代码（实际上可能还会增加），那为何通过任务分解可以提升性能呢：</p> <ul><li><strong>简单的系统更加容易做到高性能</strong> <ul><li>系统功能简单，影响性能的点更少，更加容易进行针对性优化。</li> <li>系统复杂的话，比较难找到关键性能点，因为需要考虑和验证点太多。另外可能把 A 关键点性能提升了，但是无意中 B 性能点降低了，最后整个系统的性能没有提升，反而下降了。</li></ul></li> <li><strong>可以针对单个任务进行扩展</strong> <ul><li>子系统有性能问题时，只需要针对它进行对应的优化即可，风险小</li> <li>以微信为例，如果用户增长太快，注册登录的子系统的性能出现瓶颈，只需要优化登录注册子系统的性能（代码优化或者粗暴增加机器），而其他子系统消息、LBS 完全不需要改动</li></ul></li></ul> <p>但是注意，<strong>将大系统划分成子系统能够提升性能，但并不是划分的越细越好</strong>。</p> <p>前面微信后台目前是 7 个子系统，我们把它再细分一下，划分为 100 个子系统，性能会增加吗？</p> <p>这样做性能反而会下降。<strong>系统拆分的越细，为了完成某个业务，系统间的调用次数就会呈指数级别上升</strong>，而系统间的调用通道目前都是通过网络传输，性能远比系统内的函数调用低得多。</p> <p>假设请求和响应的网络时间耗费 1ms，业务逻辑本身 50 ms，且任务拆解不影响业务逻辑时间，那么处理一次用户请求的时间：</p> <ul><li>拆分为 2 个子系统，需要 51ms</li> <li>拆分成 100 个子系统，系统间的请求 99 次，需要 149 ms</li></ul> <p>虽然系统拆分可以提升业务的处理性能，但是提升是有上限的。最终的决定业务处理性能还是在业务逻辑本身，业务逻辑本身没有发生大的改变下，理论上性能是有个极限的，拆分系统只能让性能逼近这个极限。因此任务分解带来的收益是有个度的，并不是越细越好。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/niexia/reading-notes/edit/main/docs/learn-architecture-from-zero/infrastructure/sources-of-complexity.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">August 22, 2021 11:24</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: yangjin.im@bytedance.com" class="contributor">
          杨金
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/principles/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        /learn-architecture-from-zero/infrastructure/principles/
      </a></span> <span class="next"><a href="/reading-notes/learn-architecture-from-zero/infrastructure/design-flow/">
        /learn-architecture-from-zero/infrastructure/design-flow/
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!----><!----></div></div>
    <script src="/reading-notes/assets/js/app.8bb7ee81.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Layout.b9c2e4d9.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9b90199b.js" defer></script><script src="/reading-notes/assets/js/page-系统复杂度的来源.ee896c59.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.c1acbf4e.js" defer></script>
  </body>
</html>
