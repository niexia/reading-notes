<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>重构 | Reading Notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/reading-notes/favicon.ico">
    <link rel="manifest" href="/reading-notes/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="写点啦!">
    <meta property="og:url" content="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor.html">
    <meta property="og:site_name" content="Reading Notes">
    <meta property="og:title" content="重构">
    <meta property="og:description" content="重构 “重构”这个词对于大部分工程师来说都不陌生。但是真正进行过代码重构的不多，而把持续重构作为开发的一部分就更少了。 一方面，重构对工程师要求很高。需要洞察出代码存在的坏味道或设计的不足，并且合理、熟练的应用设计思想、原则、模式、编程规范等理论知识解决这些问题。 另一方面，很多工程师没有很好的认识重构。为什么要重构、到底重构什么、什么时候重构、该如何重构等">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Reading Notes">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/reading-notes/assets/css/0.styles.9772cc4e.css" as="style"><link rel="preload" href="/reading-notes/assets/js/app.345870b4.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Layout.783be478.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9b90199b.js" as="script"><link rel="preload" href="/reading-notes/assets/js/page-重构.8c78b7bb.js" as="script"><link rel="preload" href="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.c1acbf4e.js" as="script"><link rel="preload" href="/reading-notes/assets/js/71.57253716.js" as="script"><link rel="prefetch" href="/reading-notes/assets/js/3.1b77c550.js"><link rel="prefetch" href="/reading-notes/assets/js/72.16da1e8b.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Blog.0802cdff.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Layout.ea688dcf.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-NotFound.c77a49fb.js"><link rel="prefetch" href="/reading-notes/assets/js/layout-Slide.6e5e88a9.js"><link rel="prefetch" href="/reading-notes/assets/js/page--25410731.c72f8e99.js"><link rel="prefetch" href="/reading-notes/assets/js/page--3992e0e1.addfe44d.js"><link rel="prefetch" href="/reading-notes/assets/js/page--44a0de64.b6c54115.js"><link rel="prefetch" href="/reading-notes/assets/js/page--4855b8f6.6e451f2a.js"><link rel="prefetch" href="/reading-notes/assets/js/page--5f87f751.ea557d00.js"><link rel="prefetch" href="/reading-notes/assets/js/page--7507ab0e.4efc981e.js"><link rel="prefetch" href="/reading-notes/assets/js/page--ac2b465e.e25f2a9c.js"><link rel="prefetch" href="/reading-notes/assets/js/page--d1e0c466.71ac3d47.js"><link rel="prefetch" href="/reading-notes/assets/js/page-BF算法和RK算法.202ffbff.js"><link rel="prefetch" href="/reading-notes/assets/js/page-DRY原则.52b00526.js"><link rel="prefetch" href="/reading-notes/assets/js/page-KISS.186f2a45.js"><link rel="prefetch" href="/reading-notes/assets/js/page-LOD.e7d60146.js"><link rel="prefetch" href="/reading-notes/assets/js/page-SOLID.1e5e29a2.js"><link rel="prefetch" href="/reading-notes/assets/js/page-Tire树.ec562be4.js"><link rel="prefetch" href="/reading-notes/assets/js/page-YAGNI.57fc7ef2.js"><link rel="prefetch" href="/reading-notes/assets/js/page-专业主义.af16f84a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-为什么要用金字塔原理.e360398a.js"><link rel="prefetch" href="/reading-notes/assets/js/page-为什么需要学习掌握设计模式相关知识.3ffcede7.js"><link rel="prefetch" href="/reading-notes/assets/js/page-了解架构设计.e6eb2120.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二分查找.56a5f810.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二分查找的变形.6066ab81.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二叉查找树.b7b4f127.js"><link rel="prefetch" href="/reading-notes/assets/js/page-二叉树.1e9e72f9.js"><link rel="prefetch" href="/reading-notes/assets/js/page-介绍.3f8b8940.js"><link rel="prefetch" href="/reading-notes/assets/js/page-从0开始学架构.d46de445.js"><link rel="prefetch" href="/reading-notes/assets/js/page-代码整洁之道-程序员的职业素养.f817a408.js"><link rel="prefetch" href="/reading-notes/assets/js/page-冒泡、插入和选择排序.c1e74f17.js"><link rel="prefetch" href="/reading-notes/assets/js/page-分治算法.bd1ca026.js"><link rel="prefetch" href="/reading-notes/assets/js/page-前言.cc66d306.js"><link rel="prefetch" href="/reading-notes/assets/js/page-动态规划.23e5169b.js"><link rel="prefetch" href="/reading-notes/assets/js/page-哈希算法.38d5864c.js"><link rel="prefetch" href="/reading-notes/assets/js/page-回溯算法.89e9886d.js"><link rel="prefetch" href="/reading-notes/assets/js/page-图.1b1a331d.js"><link rel="prefetch" href="/reading-notes/assets/js/page-堆.620e3562.js"><link rel="prefetch" href="/reading-notes/assets/js/page-堆的应用.13d63d71.js"><link rel="prefetch" href="/reading-notes/assets/js/page-实战.136958b1.js"><link rel="prefetch" href="/reading-notes/assets/js/page-归并排序和快速排序.de505601.js"><link rel="prefetch" href="/reading-notes/assets/js/page-手写链表的技巧.9878a3c1.js"><link rel="prefetch" href="/reading-notes/assets/js/page-排序.0afbb37e.js"><link rel="prefetch" href="/reading-notes/assets/js/page-排序优化.6884a7b1.js"><link rel="prefetch" href="/reading-notes/assets/js/page-散列表.e66d5302.js"><link rel="prefetch" href="/reading-notes/assets/js/page-数组.37195c16.js"><link rel="prefetch" href="/reading-notes/assets/js/page-栈.2a1bc434.js"><link rel="prefetch" href="/reading-notes/assets/js/page-桶排序、计数排序和基数排序.71ea81d4.js"><link rel="prefetch" href="/reading-notes/assets/js/page-深度优先和广度优先搜索.a386bf72.js"><link rel="prefetch" href="/reading-notes/assets/js/page-硅谷钢铁侠.977b2e0c.js"><link rel="prefetch" href="/reading-notes/assets/js/page-系统复杂度的来源.b407aa1e.js"><link rel="prefetch" href="/reading-notes/assets/js/page-红黑树.ca04409e.js"><link rel="prefetch" href="/reading-notes/assets/js/page-练习.1020f553.js"><link rel="prefetch" href="/reading-notes/assets/js/page-设计散列表.be637e19.js"><link rel="prefetch" href="/reading-notes/assets/js/page-说不.5e57ec82.js"><link rel="prefetch" href="/reading-notes/assets/js/page-说是.52ab684f.js"><link rel="prefetch" href="/reading-notes/assets/js/page-贪心算法.be36c700.js"><link rel="prefetch" href="/reading-notes/assets/js/page-跳表.ae1321ec.js"><link rel="prefetch" href="/reading-notes/assets/js/page-递归.4927d34e.js"><link rel="prefetch" href="/reading-notes/assets/js/page-金字塔原理.7d1e5168.js"><link rel="prefetch" href="/reading-notes/assets/js/page-链表.ffbac2ef.js"><link rel="prefetch" href="/reading-notes/assets/js/page-队列.df7ba957.js"><link rel="prefetch" href="/reading-notes/assets/js/page-面向对象是什么.920ffeff.js"><link rel="prefetch" href="/reading-notes/assets/js/vendors~photo-swipe.62884794.js">
    <link rel="stylesheet" href="/reading-notes/assets/css/0.styles.9772cc4e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/reading-notes/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">Reading Notes</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title"><!---->
        目录
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🧑🏻‍💻 技术</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/algo/" class="nav-link"><!---->
  数据结构和算法之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-beauty-of-design-patterns/" class="nav-link router-link-active active"><!---->
  设计模式之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/learn-architecture-from-zero/" class="nav-link"><!---->
  从0开始学架构
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-clean-coder/" class="nav-link"><!---->
  代码整洁之道|程序员的职业素养
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🎯 综合能力</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/the-minto-pyramid-principle/" class="nav-link"><!---->
  金字塔原理
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🥤 人物传记</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/elon-musk/" class="nav-link"><!---->
  硅谷钢铁侠
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/niexia/reading-notes" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="目录" class="dropdown-title"><span class="title"><!---->
      目录
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🧑🏻‍💻 技术</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/algo/" class="nav-link"><!---->
  数据结构和算法之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-beauty-of-design-patterns/" class="nav-link router-link-active active"><!---->
  设计模式之美
</a></li><li class="dropdown-subitem"><a href="/reading-notes/learn-architecture-from-zero/" class="nav-link"><!---->
  从0开始学架构
</a></li><li class="dropdown-subitem"><a href="/reading-notes/the-clean-coder/" class="nav-link"><!---->
  代码整洁之道|程序员的职业素养
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🎯 综合能力</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/the-minto-pyramid-principle/" class="nav-link"><!---->
  金字塔原理
</a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>🥤 人物传记</span></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/reading-notes/elon-musk/" class="nav-link"><!---->
  硅谷钢铁侠
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a rel="noopener noreferrer" href="https://github.com/niexia/reading-notes" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">面向对象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reading-notes/the-beauty-of-design-patterns/object-oriented/what-is-object-oriented/" class="sidebar-link">面向对象是什么</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/object-oriented/practice/" class="sidebar-link">实战</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">设计原则</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/SOLID/" class="sidebar-link">SOLID</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/KISS/" class="sidebar-link">KISS</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/YAGNI/" class="sidebar-link">YAGNI</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/DRY/" class="sidebar-link">DRY原则</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/LOD/" class="sidebar-link">LOD</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/practice/" class="sidebar-link">/the-beauty-of-design-patterns/design-principles/practice/</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">规范与重构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/" aria-current="page" class="active sidebar-link">重构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么情况下要重构-到底重构什么-又该如何重构" class="sidebar-link">什么情况下要重构,到底重构什么,又该如何重构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么是重构" class="sidebar-link heading3">什么是重构</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的目的-为什么要重构-why" class="sidebar-link heading3">重构的目的：为什么要重构（why）</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的对象-到底重构什么-what" class="sidebar-link heading3">重构的对象：到底重构什么（what）</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的时机-什么时候重构-when" class="sidebar-link heading3">重构的时机：什么时候重构（when）</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的方法-又该如何重构-how" class="sidebar-link heading3">重构的方法：又该如何重构（how）</a></li></ul></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#为了保证重构不出错-有哪些非常能落地的技术手段" class="sidebar-link">为了保证重构不出错，有哪些非常能落地的技术手段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么是单元测试" class="sidebar-link heading3">什么是单元测试</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#为什么要写单元测试" class="sidebar-link heading3">为什么要写单元测试</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#如何编写单元测试" class="sidebar-link heading3">如何编写单元测试</a></li><li class="sidebar-sub-header"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#单元测试为何难落地执行" class="sidebar-link heading3">单元测试为何难落地执行</a></li></ul></li></ul></li><li><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/standard/" class="sidebar-link">/the-beauty-of-design-patterns/standard-refactor/standard/</a></li><li><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/practice/" class="sidebar-link">/the-beauty-of-design-patterns/standard-refactor/practice/</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><!----></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/reading-notes/the-beauty-of-design-patterns/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">为什么需要学习掌握设计模式相关知识</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">重构</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">重构</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-5-3</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 11 min</span> <meta property="timeRequired" content="PT11M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么情况下要重构-到底重构什么-又该如何重构" class="anchor-link heading2"><div>什么情况下要重构,到底重构什么,又该如何重构</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么是重构" class="anchor-link heading3"><div>什么是重构</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的目的-为什么要重构-why" class="anchor-link heading3"><div>重构的目的：为什么要重构（why）</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的对象-到底重构什么-what" class="anchor-link heading3"><div>重构的对象：到底重构什么（what）</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的时机-什么时候重构-when" class="anchor-link heading3"><div>重构的时机：什么时候重构（when）</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#重构的方法-又该如何重构-how" class="anchor-link heading3"><div>重构的方法：又该如何重构（how）</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#为了保证重构不出错-有哪些非常能落地的技术手段" class="anchor-link heading2"><div>为了保证重构不出错，有哪些非常能落地的技术手段</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#什么是单元测试" class="anchor-link heading3"><div>什么是单元测试</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#为什么要写单元测试" class="anchor-link heading3"><div>为什么要写单元测试</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#如何编写单元测试" class="anchor-link heading3"><div>如何编写单元测试</div></a></li><li class="anchor"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/refactor/#单元测试为何难落地执行" class="anchor-link heading3"><div>单元测试为何难落地执行</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="重构"><a href="#重构" class="header-anchor">#</a> 重构</h1> <p>“重构”这个词对于大部分工程师来说都不陌生。但是真正进行过代码重构的不多，而把持续重构作为开发的一部分就更少了。</p> <p>一方面，<strong>重构对工程师要求很高</strong>。需要洞察出代码存在的坏味道或设计的不足，并且合理、熟练的应用设计思想、原则、模式、编程规范等理论知识解决这些问题。</p> <p>另一方面，很多工程师没有很好的认识重构。为什么要重构、到底重构什么、什么时候重构、该如何重构等问题理解不深。对重构没有系统性、全局性的认识。面对一堆烂代码，没有重构技巧的指导，只能想到哪改到哪，不能全面的改善代码质量。</p> <p>接下来通过学习帮助对重构有更清晰的认识。</p> <h2 id="什么情况下要重构-到底重构什么-又该如何重构"><a href="#什么情况下要重构-到底重构什么-又该如何重构" class="header-anchor">#</a> 什么情况下要重构,到底重构什么,又该如何重构</h2> <h3 id="什么是重构"><a href="#什么是重构" class="header-anchor">#</a> 什么是重构</h3> <p>软件设计大师 Martin Fowler 是这样定义重构的：“<strong>重构是一种对软件内部结构的改善，目的是在不改变软件的可见行为的情况下，使其更易理解，修改成本更低。</strong>”</p> <p>这个定义中值得强调的点：“重构不改变外部的可见行为”。可以把重构理解为，在保持功能不变的前提下，利用设计思想、原则、模式、编程范式等理论来优化代码，修改设计上的不足，提高代码的质量。</p> <h3 id="重构的目的-为什么要重构-why"><a href="#重构的目的-为什么要重构-why" class="header-anchor">#</a> 重构的目的：为什么要重构（why）</h3> <p>了解重构定义后，我们看一下为什么要进行重构？</p> <ul><li><strong>首先，重构是时刻保证代码质量的一个极其有效的手段，不至于让代码腐化到无可救药的地步。</strong></li></ul> <p>项目演进代码堆砌之后，如果没有人为代码的质量负责任，代码总会向越来越混乱的方向演进。当混乱到一定程度之后，量变引起质变，项目的维护成本已经高过重新开发一套新代码的成本，想要去重构已经没人能做到了。</p> <p class="nx-tip warning">
  熵增定律：在一个孤立系统里，如果没有外力做工，其混乱程度（即熵）会不断增大。
</p> <ul><li><strong>其次，优秀的代码或架构不是一开始就能完全设计好的，就像优秀的公司和产品也都是迭代出来的。</strong></li></ul> <p>就像优秀的公司和产品也是迭代出来的。我们无法 100% 预见未来的需求，也没有足够的精力、时间、资源现在为遥远的未来买单。所以随着系统的演进，代码重构是不可避免的。</p> <ul><li><strong>最后，重构是避免过度设计的有效手段。</strong></li></ul> <p>在维护代码的过程中，真正遇到问题的时候再对代码进行重构，能有效避免前期投入太多时间做过度设计，做到有的放矢（yǒu dì fàng shǐ 即有靶子才放箭，放箭時要對準靶子。比喻說話做事有明確的目的和針對性。）</p> <p><strong>除此之外，重构对一个工程师本身技术的成长也有重要的意义。</strong></p> <p>重构实际上是经典设计思想、设计原则、设计模式、编程规范一个很好的应用场景，能够<strong>锻炼</strong>我们对这些理论知识使用的能力。</p> <p>除此之外，平常堆砌业务逻辑你可能觉得没有成长，而将比较烂的代码重构成一个比较好的代码，会让你很有<strong>成就感</strong>。</p> <p>重构也是衡量一个工程师代码能力的有效手段。所谓“初级工程师在维护代码，高级工程师在设计代码，资深工程师在重构代码”。</p> <h3 id="重构的对象-到底重构什么-what"><a href="#重构的对象-到底重构什么-what" class="header-anchor">#</a> 重构的对象：到底重构什么（what）</h3> <p>根据重构的规模，可以分为大规模高层次重构（简称“大型重构”）和小规模低层次的重构（简称“小型重构”）。</p> <ul><li>大型重构：指的是对顶层代码设计的重构，包括系统、模块、代码结构、类与类之间的关系等重构。</li></ul> <p>重构的<strong>手段</strong>有分层、模块化、解耦、抽象可复用组件等。重构的<strong>工具</strong>事是面学习过的那些设计思想、原则和模式。这类重构代码<strong>特点</strong>是改动量会比较多、影响会比较大，所以难度较高，耗时较长，引入 bug 的概率也相对较大。</p> <ul><li>小型重构：指的是对代码细节的重构，主要是类、函数、变量等代码级别的重构。</li></ul> <p>比如规范命名、规范注释、消除超大类或函数、提取重复代码等。重构的<strong>工具</strong>是编程规范。<strong>特点</strong>是修改的地方比较集中，比较简单，耗时短，引入 bug 的风险相对也会比较小。</p> <h3 id="重构的时机-什么时候重构-when"><a href="#重构的时机-什么时候重构-when" class="header-anchor">#</a> 重构的时机：什么时候重构（when）</h3> <p>代码烂到一定程度之后才去重构吗？当然不是！！！</p> <p>因为当代码烂到“开发效率低，招了很多人，天天加班，产出却很少。线上 bug 频发，领导发飙，中层束手无策，工程师抱怨不断，查找 bug 困难”的时候，基本上重构也无法解决问题了。</p> <p class="nx-tip warning">
  工作中要对这些现象保持敏感！尽早解决问题
</p> <p><strong>反对平时不注重代码质量，堆砌烂代码，实在维护不了了就大刀阔斧地重构、甚至重写的行为</strong>。寄希望于代码烂到一定程度之后，集中重构解决所有问题是不现实的。必须<strong>探索一条可持续、可演进的方式</strong>。</p> <p><strong>特别提倡的重构策略是持续重构</strong>。平时没有事情的时候，看看项目那些写得不够好的、可以优化的代码，主动去重构一下。或者在开发时修改、添加某个功能时，可以顺手把不符合编程规范、不好的设计重构一下。</p> <p>就像把单元测试、Code Review 作为开发的一部分，如果能把持续重构作为开发的一部分，成为一种开发习惯，对项目、对自己都有好处。</p> <p>持续重构的意识比重构本身的能力更重要。</p> <h3 id="重构的方法-又该如何重构-how"><a href="#重构的方法-又该如何重构-how" class="header-anchor">#</a> 重构的方法：又该如何重构（how）</h3> <p>前面我们根据重构的规模，把重构笼统地分为大型重构和小型重构。针对这两种类型，要区别对待。</p> <ul><li>进行大型重构：要提前规划好完善的重构计划，有条不紊的分阶段来进行。</li></ul> <p>具体来说：</p> <p>1.每个阶段完成一小部分代码的重构，然后提交、测试、运行，发现没有问题之后，再继续进行下一阶段的重构，保证代码仓库的代码一直处于可运行、逻辑正确的状态
2.每个阶段要控制好重构影响到的代码范围，考虑如何兼容老的代码逻辑，必要的时候还需要写一些兼容过渡代码。</p> <p>只要这样，我们才能让每一阶段的重构不至于耗时太长（最好一天完成），不至于与新的功能开发冲突。</p> <p>大型重构一定是<strong>有组织、有计划，并且非常谨慎</strong>，需要有经验、熟悉业务的资深同是来主导。</p> <ul><li>进行小型重构：影响小，改动耗时短，只要你愿意并且有时间，随时都可以去做。</li></ul> <p>这些低层次的质量问题，除了人工去发现，<strong>更建议借用成熟的静态代码分析工具</strong>（比如 sornar）来自动发现代码问题，然后针对性的重构优化。</p> <p><strong>对于重构这件事，资深工程师，项目 leader 要负起责任来，持续重构，时刻保持代码质量处于一个良好的状态</strong>。否则，一旦出现“<a href="https://zh.m.wikipedia.org/zh/%E7%A0%B4%E7%AA%97%E6%95%88%E5%BA%94" target="_blank" rel="noopener noreferrer">破窗效应<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”，一个人往里面堆了一些烂代码，之后就会有更多人往里面堆更烂的代码。毕竟往项目里堆砌烂代码的成本太低了。</p> <p><strong>保持代码质量最好的方法还是打造一种好的技术氛围，以此驱动大家去关注代码质量，持续重构代码</strong>。</p> <h2 id="为了保证重构不出错-有哪些非常能落地的技术手段"><a href="#为了保证重构不出错-有哪些非常能落地的技术手段" class="header-anchor">#</a> 为了保证重构不出错，有哪些非常能落地的技术手段</h2> <p>很多工程师对重构还是比较认同的，面对项目中的烂代码，也想重构一下，<strong>但是又担心出问题，出力不讨好</strong>。</p> <p>那如何保证重构不出错呢？</p> <p>需要熟练掌握各种设计原则、思想、模式，还需要对业务和代码有足够的了解。除了这些个人能力因素之外，<strong>最可落地执行、最有效保证重构不出错的手段应该就是单元测试</strong>（Unit Testing）了。</p> <p>当重构之后，如果新的代码仍能通过单元测试，那就说明原有的逻辑的正确性未被破坏，原有的外部可见行为未变，符合前面对重构的定义。</p> <p>接下来我们学习一下单元测试。</p> <h3 id="什么是单元测试"><a href="#什么是单元测试" class="header-anchor">#</a> 什么是单元测试</h3> <ul><li><strong>单元测试</strong></li></ul> <p>单元测试由研发工程师自己来编写，用来测试自己写的代码的正确性。测试对象是<strong>类或者函数</strong>，用来测试一个类和函数是否都按照预期的逻辑执行。这是<strong>代码层级</strong>的测试。是一个白盒测试</p> <p>其他测试方式对比（<a href="https://start-up.house/en/blog/articles/front-end-testing" target="_blank" rel="noopener noreferrer">https://start-up.house/en/blog/articles/front-end-testing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</p> <ul><li><strong>集成测试</strong></li></ul> <p>确保应用程序的各个部分能够一起工作。从商业角度来看，它们是至关重要的。记住，用户并不关心你的应用程序的单一功能是否工作。他们感兴趣的是知道他们是否可以使用整个应用程序，这就是集成测试的闪光点。</p> <p>例如 <a href="https://github.com/testing-library/react-testing-library#basic-example" target="_blank" rel="noopener noreferrer">React测试库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是集成测试的首选资源。它的主要目标是允许测试你的用户使用应用程序的方式（组件），避免测试实施细节。提供了大量的工具，使测试更直接，更可维护。</p> <ul><li><strong>E2E测试</strong></li></ul> <p>与其他类型的测试不同，因为它们<strong>在真实的浏览器中运行</strong>。我们把测试用例写成自动浏览器的分步说明，以通过我们要测试的应用程序的部分。</p> <p>最受欢迎的端到端测试工具之一是Cypress。它很容易设置和使用，而且速度很快。</p> <p>写单元测试本身不需要什么高深技术。<strong>它更多的是考验程序员思维的缜密程度，看能否设计出覆盖各种正常及异常情况的测试用例，来保证代码在任何预期或非预期的情况下都能正确运行</strong>。</p> <h3 id="为什么要写单元测试"><a href="#为什么要写单元测试" class="header-anchor">#</a> 为什么要写单元测试</h3> <p>单元测试除了能有效地为重构保驾护航之外，也是保证代码质量最有效的两个手段之一（另一个是 Code Review）</p> <p>总结了以下几点单元测试的好处。尽管有些“务虚”，不过如果认真写过，应该会有共鸣。</p> <ul><li>单元测试能有效地帮你发现代码中的 bug</li></ul> <p><strong>能否写出 bug free 的代码，是判断工程师编码能力的重要标准之一</strong>。通过编写完善的单元测试，保证写的代码几乎是 bug free 的。节省了我很多 fix 低级 bug 的时间，能够有时间去做其他更有意义的事情，也因此在工作上赢得了很多人的认可。</p> <ul><li>写单元测试能帮你发现代码设计上的问题</li></ul> <p><strong>代码的可测试性是评判代码质量的一个重要标准</strong>。对于一段代码，如果很难为其编写单元测试，或者单元测试写起来很吃力，需要依靠单元测试框架里很高级的特性才能完成，<strong>那往往就意味着代码设计得不够合理</strong>，比如，没有使用依赖注入、大量使用静态函数、全局变量、代码高度耦合等。</p> <ul><li>单元测试是对集成测试的有力补充</li></ul> <p>程序运行的 bug 往往出现在一些边界条件、异常情况下，有些测试环境比较难模拟。单元测试可以利用 mock 的方式，控制 mock 的对象返回我们需要模拟的异常，来测试代码在这些异常情况的表现。</p> <ul><li>写单元测试的过程本身就是代码重构的过程</li> <li>阅读单元测试能帮助你快速熟悉代码</li> <li>单元测试是 TDD 可落地执行的改进方案</li></ul> <h3 id="如何编写单元测试"><a href="#如何编写单元测试" class="header-anchor">#</a> 如何编写单元测试</h3> <h3 id="单元测试为何难落地执行"><a href="#单元测试为何难落地执行" class="header-anchor">#</a> 单元测试为何难落地执行</h3></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/niexia/reading-notes/edit/main/docs/the-beauty-of-design-patterns/standard-refactor/refactor.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">May 3, 2022 02:41</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: yangjin.im@bytedance.com" class="contributor">
          杨金
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/reading-notes/the-beauty-of-design-patterns/design-principles/practice/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        /the-beauty-of-design-patterns/design-principles/practice/
      </a></span> <span class="next"><a href="/reading-notes/the-beauty-of-design-patterns/standard-refactor/standard/">
        /the-beauty-of-design-patterns/standard-refactor/standard/
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!----><!----></div></div>
    <script src="/reading-notes/assets/js/app.345870b4.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Layout.783be478.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.9b90199b.js" defer></script><script src="/reading-notes/assets/js/page-重构.8c78b7bb.js" defer></script><script src="/reading-notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.c1acbf4e.js" defer></script><script src="/reading-notes/assets/js/71.57253716.js" defer></script>
  </body>
</html>
